{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\src\\\\StoreOwnerView.js\";\nimport React, { Component } from 'react';\nimport StoreContract from '../build/contracts/Store.json';\n\nvar contract = require(\"truffle-contract\");\n\nvar StoreOwnerView =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(StoreOwnerView, _Component);\n\n  function StoreOwnerView(props) {\n    var _this;\n\n    _classCallCheck(this, StoreOwnerView);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(StoreOwnerView).call(this, props));\n    _this.state = {\n      loading: true,\n      loadingNewProduct: false,\n      instance: null,\n      name: '',\n      isStopped: false,\n      description: '',\n      products: [],\n      newProductName: '',\n      newProductDescription: '',\n      newProductPrice: '',\n      loadingStoppedStateChange: false\n    };\n    _this.addNewProduct = _this.addNewProduct.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.fetchData = _this.fetchData.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.updateInventoryCount = _this.updateInventoryCount.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.toggleEmergencyStop = _this.toggleEmergencyStop.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(StoreOwnerView, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchData();\n    }\n  }, {\n    key: \"fetchData\",\n    value: function fetchData() {\n      var _this2 = this;\n\n      var storeContract = contract(StoreContract);\n      var instance;\n      var name;\n      var description;\n      var products;\n      var isStopped;\n      storeContract.setProvider(this.props.web3.currentProvider);\n      storeContract.at(this.props.address) // save reference to store instance\n      .then(function (store) {\n        instance = store;\n        return store;\n      }) // call contract for store metadata \n      .then(function (store) {\n        return Promise.all([store.name(), store.description(), store.newestProductSku(), store.stopped()]);\n      }) // save store metadata\n      .then(function (data) {\n        name = data[0];\n        description = data[1];\n        isStopped = data[3];\n        return data[2].toNumber();\n      }) // call contract for each products metadata\n      .then(function (newestProductSku) {\n        var result = [];\n\n        for (var i = 1; i <= newestProductSku; i++) {\n          result.push(instance.productsBySku(i));\n        }\n\n        return Promise.all(result);\n      }) // save product metadata\n      .then(function (data) {\n        console.log(name, data);\n        products = data.map(function (product) {\n          return {\n            sku: product[0].toNumber(),\n            inventoryCount: product[1].toNumber(),\n            price: product[2].toNumber(),\n            name: product[3],\n            description: product[4]\n          };\n        });\n      }) // update state with all the stuff we just fetched\n      .then(function () {\n        return _this2.setState({\n          instance: instance,\n          name: name,\n          description: description,\n          products: products,\n          isStopped: isStopped,\n          loading: false\n        });\n      });\n    }\n  }, {\n    key: \"addNewProduct\",\n    value: function addNewProduct() {\n      var _this3 = this;\n\n      if (!this.state.newProductName || !this.state.newProductDescription || !this.state.newProductPrice) {\n        return;\n      }\n\n      this.setState({\n        loadingNewProduct: true\n      }, function () {\n        var wei = _this3.props.web3.toWei(_this3.state.newProductPrice, \"ether\");\n\n        _this3.state.instance.addNewProduct.sendTransaction(_this3.state.newProductName, _this3.state.newProductDescription, wei, {\n          from: _this3.props.currentAccount\n        }).then(function () {\n          var event = _this3.state.instance.NewProductAdded( // using products.length as a hack to get the sku\n          // for the product that should be generated \n          // from this call to addNewProduct.\n          {\n            sku: _this3.state.products.length + 1\n          }, {\n            fromBlock: 'latest'\n          });\n\n          event.watch(function (error, result) {\n            if (!error) {\n              _this3.state.instance.newestProductSku().then(function (res) {\n                return res.toNumber();\n              }).then(function (latestSku) {\n                var result = [];\n\n                for (var i = 1; i <= latestSku; i++) {\n                  result.push(_this3.state.instance.productsBySku(i));\n                }\n\n                return Promise.all(result);\n              }).then(function (data) {\n                return data.map(function (product) {\n                  return {\n                    sku: product[0].toNumber(),\n                    inventoryCount: product[1].toNumber(),\n                    price: product[2].toNumber(),\n                    name: product[3],\n                    description: product[4]\n                  };\n                });\n              }).then(function (products) {\n                _this3.setState({\n                  loadingNewProduct: false,\n                  products: products,\n                  newProductName: '',\n                  newProductDescription: '',\n                  newProductPrice: ''\n                });\n              });\n            }\n          });\n        });\n      });\n    }\n  }, {\n    key: \"updateInventoryCount\",\n    value: function updateInventoryCount(sku, newVal) {\n      // this is a hack - mutating state directly\n      this.state.products.find(function (n) {\n        return n.sku === sku;\n      }).inventoryCount = newVal;\n      this.forceUpdate();\n    }\n  }, {\n    key: \"sendUpdateInventoryCount\",\n    value: function sendUpdateInventoryCount(sku, newCount) {\n      this.state.instance.updateInventoryCount.sendTransaction(sku, newCount, {\n        from: this.props.currentAccount\n      });\n    }\n  }, {\n    key: \"toggleEmergencyStop\",\n    value: function toggleEmergencyStop() {\n      var _this4 = this;\n\n      this.setState({\n        loadingStoppedStateChange: true\n      }, function () {\n        _this4.state.instance.toggleContractActive.sendTransaction({\n          from: _this4.props.currentAccount\n        }).then(function () {\n          var event = _this4.state.instance.ContractStateToggled();\n\n          event.watch(function (error, result) {\n            if (!error) {\n              _this4.setState({\n                isStopped: !_this4.state.isStopped,\n                loadingStoppedStateChange: false\n              }, function () {\n                event.stopWatching();\n              });\n            }\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      //TODO: add withdraw button to store\n      var products = this.state.products.length ? this.state.products.map(function (product) {\n        return React.createElement(\"div\", {\n          key: product.sku,\n          style: {\n            borderBottom: '1px solid #0000001e',\n            margin: '0 auto',\n            padding: '5px 0 5px 0',\n            overflow: 'auto'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            width: '100%',\n            marginBottom: '5px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            fontSize: '18px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196\n          },\n          __self: this\n        }, product.name), React.createElement(\"div\", {\n          style: {\n            fontSize: '12px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197\n          },\n          __self: this\n        }, product.description)), React.createElement(\"div\", {\n          style: {\n            float: 'left'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            fontSize: '18px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200\n          },\n          __self: this\n        }, _this5.props.web3.fromWei(product.price, \"ether\")), React.createElement(\"div\", {\n          style: {\n            fontSize: '12px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201\n          },\n          __self: this\n        }, \"Price (ETH)\")), React.createElement(\"div\", {\n          style: {\n            float: 'right'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"number\",\n          style: {\n            width: '50px',\n            marginRight: '5px'\n          },\n          value: product.inventoryCount,\n          onChange: function onChange(e) {\n            return _this5.updateInventoryCount(product.sku, e.target.value);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this5.sendUpdateInventoryCount(product.sku, product.inventoryCount);\n          },\n          type: \"button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209\n          },\n          __self: this\n        }, \"Update\")), React.createElement(\"div\", {\n          style: {\n            fontSize: '12px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212\n          },\n          __self: this\n        }, \"Inventory\")));\n      }) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, \"None yet...\");\n      return React.createElement(\"div\", {\n        style: {\n          border: '1px solid #0000001e',\n          borderRadius: '4px',\n          backgroundColor: '#fafafa',\n          width: '33%',\n          padding: '15px 15px 60px 15px',\n          position: 'relative',\n          display: 'inline-block',\n          verticalAlign: 'top',\n          margin: '15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, this.state.loading ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, \"Loading...\") : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          fontSize: '24px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, this.state.name), React.createElement(\"div\", {\n        style: {\n          fontSize: '14px',\n          height: '20px',\n          width: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, this.state.description), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          borderBottom: '1px solid #0000001e'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, \"Products\"), products, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, \"New Product\"), React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.newProductName,\n        placeholder: \"Name\",\n        style: {\n          marginBottom: '5px',\n          width: '100%'\n        },\n        disabled: this.state.loadingNewProduct,\n        onChange: function onChange(e) {\n          return _this5.setState({\n            newProductName: e.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.newProductDescription,\n        placeholder: \"Description\",\n        style: {\n          marginBottom: '5px',\n          width: '100%'\n        },\n        disabled: this.state.loadingNewProduct,\n        onChange: function onChange(e) {\n          return _this5.setState({\n            newProductDescription: e.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.newProductPrice,\n        placeholder: \"Price (ETH)\",\n        style: {\n          width: '100%'\n        },\n        disabled: this.state.loadingNewProduct,\n        onChange: function onChange(e) {\n          return _this5.setState({\n            newProductPrice: e.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }), this.state.loadingNewProduct ? React.createElement(\"div\", {\n        style: {\n          position: 'absolute',\n          bottom: '15px',\n          left: '15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, \"Loading...\") : React.createElement(\"button\", {\n        onClick: this.addNewProduct,\n        style: {\n          position: 'absolute',\n          bottom: '15px',\n          left: '15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, \"Add\"), this.state.loadingStoppedStateChange ? React.createElement(\"div\", {\n        style: {\n          position: 'absolute',\n          bottom: '15px',\n          right: '15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, \"Loading...\") : React.createElement(\"button\", {\n        onClick: this.toggleEmergencyStop,\n        style: {\n          position: 'absolute',\n          bottom: '15px',\n          right: '15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, this.state.isStopped ? 'Start' : 'Stop', \" Store\")));\n    }\n  }]);\n\n  return StoreOwnerView;\n}(Component);\n\nexport default StoreOwnerView;","map":{"version":3,"sources":["C:\\Users\\Nikhil\\Documents\\GitHub\\ConsensysAcademy-Final-Project\\src\\StoreOwnerView.js"],"names":["React","Component","StoreContract","contract","require","StoreOwnerView","props","state","loading","loadingNewProduct","instance","name","isStopped","description","products","newProductName","newProductDescription","newProductPrice","loadingStoppedStateChange","addNewProduct","bind","fetchData","updateInventoryCount","toggleEmergencyStop","storeContract","setProvider","web3","currentProvider","at","address","then","store","Promise","all","newestProductSku","stopped","data","toNumber","result","i","push","productsBySku","console","log","map","product","sku","inventoryCount","price","setState","wei","toWei","sendTransaction","from","currentAccount","event","NewProductAdded","length","fromBlock","watch","error","res","latestSku","newVal","find","n","forceUpdate","newCount","toggleContractActive","ContractStateToggled","stopWatching","borderBottom","margin","padding","overflow","width","marginBottom","fontSize","float","fromWei","marginRight","e","target","value","sendUpdateInventoryCount","border","borderRadius","backgroundColor","position","display","verticalAlign","height","bottom","left","right"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport StoreContract from '../build/contracts/Store.json'\r\n\r\nconst contract = require(\"truffle-contract\");\r\n\r\n\r\nclass StoreOwnerView extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      loading: true,\r\n      loadingNewProduct: false,\r\n      instance: null,\r\n      name: '',\r\n      isStopped: false,\r\n      description: '',\r\n      products: [],\r\n      newProductName: '',\r\n      newProductDescription: '',\r\n      newProductPrice: '',\r\n      loadingStoppedStateChange: false\r\n    };\r\n\r\n    this.addNewProduct = this.addNewProduct.bind(this);\r\n    this.fetchData = this.fetchData.bind(this);\r\n    this.updateInventoryCount = this.updateInventoryCount.bind(this);\r\n    this.toggleEmergencyStop = this.toggleEmergencyStop.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n\r\n  fetchData() {\r\n    const storeContract = contract(StoreContract);\r\n    let instance;\r\n    let name;\r\n    let description;\r\n    let products;\r\n    let isStopped;\r\n\r\n    storeContract.setProvider(this.props.web3.currentProvider);\r\n    storeContract.at(this.props.address)\r\n      // save reference to store instance\r\n      .then(store => {\r\n        instance = store;\r\n        return store;\r\n      })\r\n      // call contract for store metadata \r\n      .then(store => Promise.all([\r\n        store.name(), \r\n        store.description(),\r\n        store.newestProductSku(),\r\n        store.stopped()\r\n      ]))\r\n      // save store metadata\r\n      .then(data => {\r\n        name = data[0];\r\n        description = data[1];\r\n        isStopped = data[3];\r\n        return data[2].toNumber();\r\n      })\r\n      // call contract for each products metadata\r\n      .then(newestProductSku => {\r\n        const result = [];\r\n        for (let i = 1; i <= newestProductSku; i++) {\r\n          result.push(instance.productsBySku(i));\r\n        }\r\n        return Promise.all(result);\r\n      })\r\n      // save product metadata\r\n      .then(data => {\r\n        console.log(name, data);\r\n        products = data.map(product => ({\r\n          sku: product[0].toNumber(), \r\n          inventoryCount: product[1].toNumber(),\r\n          price: product[2].toNumber(),\r\n          name: product[3], \r\n          description: product[4]\r\n        }))\r\n      })\r\n      // update state with all the stuff we just fetched\r\n      .then(() => this.setState({\r\n        instance,\r\n        name,\r\n        description,\r\n        products,\r\n        isStopped,\r\n        loading: false\r\n      }));\r\n  }\r\n\r\n  addNewProduct() {\r\n    if (!this.state.newProductName || !this.state.newProductDescription || !this.state.newProductPrice) {\r\n      return;\r\n    }\r\n\r\n    this.setState({loadingNewProduct: true}, () => {\r\n      const wei = this.props.web3.toWei(this.state.newProductPrice, \"ether\");\r\n      this.state.instance.addNewProduct.sendTransaction(\r\n        this.state.newProductName, \r\n        this.state.newProductDescription, \r\n        wei,\r\n        {from: this.props.currentAccount})\r\n      .then(() => {\r\n        var event = this.state.instance.NewProductAdded(\r\n          // using products.length as a hack to get the sku\r\n          // for the product that should be generated \r\n          // from this call to addNewProduct.\r\n          {sku: this.state.products.length + 1}, \r\n          {fromBlock: 'latest'});\r\n\r\n        event.watch((error, result) => {\r\n          if (!error) {\r\n            this.state.instance.newestProductSku()\r\n              .then(res => res.toNumber())\r\n              .then(latestSku => {\r\n                const result = [];\r\n                for (let i = 1; i <= latestSku; i++) {\r\n                  result.push(this.state.instance.productsBySku(i));\r\n                }\r\n                return Promise.all(result);\r\n              })\r\n              .then(data => {\r\n                return data.map(product => ({\r\n                  sku: product[0].toNumber(), \r\n                  inventoryCount: product[1].toNumber(), \r\n                  price: product[2].toNumber(),\r\n                  name: product[3], \r\n                  description: product[4]\r\n                }))\r\n              })\r\n              .then(products => {\r\n                this.setState({\r\n                  loadingNewProduct: false, \r\n                  products: products,\r\n                  newProductName: '',\r\n                  newProductDescription: '',\r\n                  newProductPrice: ''\r\n                });                \r\n              });\r\n          }\r\n        });\r\n      });\r\n\r\n    });\r\n  }\r\n\r\n  updateInventoryCount(sku, newVal) {\r\n    // this is a hack - mutating state directly\r\n    this.state.products.find(n => n.sku === sku).inventoryCount = newVal;\r\n    this.forceUpdate()\r\n  }\r\n\r\n  sendUpdateInventoryCount(sku, newCount) {\r\n    this.state.instance.updateInventoryCount.sendTransaction(\r\n      sku, \r\n      newCount,\r\n      {from: this.props.currentAccount});\r\n  }\r\n\r\n  toggleEmergencyStop() {\r\n    this.setState({loadingStoppedStateChange: true}, () => {\r\n      this.state.instance.toggleContractActive.sendTransaction({from: this.props.currentAccount})\r\n        .then(() => {\r\n          let event = this.state.instance.ContractStateToggled();\r\n          event.watch((error, result) => {\r\n            if (!error) {\r\n              this.setState({\r\n                isStopped: !this.state.isStopped, \r\n                loadingStoppedStateChange: false\r\n              }, () => {\r\n                event.stopWatching();\r\n              });\r\n            }\r\n          })\r\n        });\r\n    });\r\n  }\r\n\r\n  render() {\r\n\r\n\r\n    //TODO: add withdraw button to store\r\n\r\n    const products = this.state.products.length \r\n      ? this.state.products.map(product => \r\n          <div key={product.sku}\r\n               style={{\r\n                  borderBottom: '1px solid #0000001e', \r\n                  margin: '0 auto',\r\n                  padding: '5px 0 5px 0',\r\n                  overflow: 'auto'}}>\r\n            <div style={{width: '100%', marginBottom: '5px'}}>\r\n              <div style={{fontSize: '18px'}}>{product.name}</div>\r\n              <div style={{fontSize: '12px'}}>{product.description}</div>\r\n            </div>\r\n            <div style={{float: 'left'}}>\r\n              <div style={{fontSize: '18px'}}>{this.props.web3.fromWei(product.price, \"ether\")}</div>\r\n              <div style={{fontSize: '12px'}}>Price (ETH)</div>\r\n            </div>\r\n            <div style={{float: 'right'}}>\r\n              <div>\r\n                <input type=\"number\" \r\n                       style={{width: '50px', marginRight: '5px'}}\r\n                       value={product.inventoryCount} \r\n                       onChange={(e) => this.updateInventoryCount(product.sku, e.target.value)} />\r\n                <button onClick={() => this.sendUpdateInventoryCount(product.sku, product.inventoryCount)} \r\n                        type=\"button\">Update</button>\r\n              </div>\r\n              <div style={{fontSize: '12px'}}>Inventory</div>\r\n            </div>\r\n          </div>) \r\n      : <div>None yet...</div>;\r\n\r\n    return (\r\n      <div style={{\r\n        border: '1px solid #0000001e', \r\n        borderRadius: '4px', \r\n        backgroundColor: '#fafafa',\r\n        width: '33%',\r\n        padding: '15px 15px 60px 15px',\r\n        position: 'relative',\r\n        display: 'inline-block',\r\n        verticalAlign: 'top',\r\n        margin: '15px'}}>\r\n\r\n        {this.state.loading \r\n          ? <div>Loading...</div> \r\n          : (\r\n              <div>\r\n                <div style={{fontSize: '24px' }}>{this.state.name}</div>\r\n                <div style={{fontSize: '14px', height: '20px', width: '100%'}}>{this.state.description}</div>\r\n\r\n                <br />\r\n\r\n                <div style={{borderBottom: '1px solid #0000001e'}}>Products</div>\r\n                {products}\r\n\r\n                <br />\r\n\r\n                <div>New Product</div>\r\n\r\n                <input type=\"text\"\r\n                       value={this.state.newProductName} \r\n                       placeholder=\"Name\" \r\n                       style={{marginBottom: '5px', width: '100%'}}\r\n                       disabled={this.state.loadingNewProduct}\r\n                       onChange={e => this.setState({newProductName: e.target.value})} />\r\n\r\n                <input type=\"text\"\r\n                       value={this.state.newProductDescription} \r\n                       placeholder=\"Description\"\r\n                       style={{marginBottom: '5px', width: '100%'}}\r\n                       disabled={this.state.loadingNewProduct}\r\n                       onChange={e => this.setState({newProductDescription: e.target.value})} />\r\n\r\n                <input type=\"text\"\r\n                       value={this.state.newProductPrice} \r\n                       placeholder=\"Price (ETH)\"\r\n                       style={{width: '100%'}}\r\n                       disabled={this.state.loadingNewProduct}\r\n                       onChange={e => this.setState({newProductPrice: e.target.value})} />\r\n\r\n                {\r\n                  this.state.loadingNewProduct \r\n                    ? <div style={{\r\n                             position: 'absolute', \r\n                             bottom: '15px',\r\n                             left: '15px'}}>Loading...</div>\r\n                    : <button onClick={this.addNewProduct}\r\n                              style={{\r\n                                position: 'absolute', \r\n                                bottom: '15px',\r\n                                left: '15px'}}>Add</button>\r\n                }\r\n\r\n                {\r\n                  this.state.loadingStoppedStateChange\r\n                    ? <div style={{\r\n                            position: 'absolute', \r\n                           bottom: '15px',\r\n                           right: '15px'}}>Loading...</div>\r\n                    : <button onClick={this.toggleEmergencyStop}\r\n                              style={{\r\n                                position: 'absolute', \r\n                                bottom: '15px',\r\n                                right: '15px'}}>{this.state.isStopped ? 'Start' : 'Stop'} Store</button>\r\n                }\r\n              </div>\r\n            )\r\n        }\r\n      </div>);\r\n  }\r\n}\r\n\r\nexport default StoreOwnerView;\r\n"]},"metadata":{},"sourceType":"module"}