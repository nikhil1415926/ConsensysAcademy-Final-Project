{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport MarketplaceContract from '../../build/contracts/Marketplace.json';\nimport getWeb3 from './utils/getWeb3';\nimport AdminComponent from './AdminComponent';\nimport StoreOwnerContainer from './StoreOwnerContainer';\nimport ShopperContainer from './ShopperContainer';\nimport './css/oswald.css';\nimport './css/open-sans.css';\nimport './css/pure-min.css';\nimport './App.css';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      accountType: '',\n      web3: null,\n      marketplaceInstance: null,\n      currentAccount: ''\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      // Get network provider and web3 instance.\n      // See utils/getWeb3 for more info.\n      getWeb3.then(function (results) {\n        _this2.setState({\n          web3: results.web3\n        }); // Instantiate contract once web3 provided.\n\n\n        _this2.instantiateContract();\n      }).catch(function () {\n        console.log('Error finding web3.');\n      });\n    }\n  }, {\n    key: \"instantiateContract\",\n    value: function instantiateContract() {\n      var _this3 = this;\n\n      var contract = require('truffle-contract');\n\n      var marketplace = contract(MarketplaceContract);\n      marketplace.setProvider(this.state.web3.currentProvider);\n      this.state.web3.eth.getAccounts(function (error, accounts) {\n        marketplace.deployed().then(function (instance) {\n          return _this3.setState({\n            marketplaceInstance: instance,\n            currentAccount: accounts[0]\n          });\n        }).then(function () {\n          return _this3.state.marketplaceInstance.getUserType.call({\n            from: accounts[0]\n          });\n        }).then(function (accountType) {\n          return _this3.setState({\n            accountType: accountType\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var accountType = this.state.accountType;\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(\"main\", {\n        style: {\n          marginTop: '25px'\n        },\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"pure-g\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"pure-u-1-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, accountType === '' && React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, \"Loading...\"), accountType === 'admin' && React.createElement(AdminComponent, {\n        web3: this.state.web3,\n        currentAccount: this.state.currentAccount,\n        marketplace: this.state.marketplaceInstance,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }), accountType === 'storeOwner' && React.createElement(StoreOwnerContainer, {\n        web3: this.state.web3,\n        currentAccount: this.state.currentAccount,\n        marketplace: this.state.marketplaceInstance,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }), accountType === 'shopper' && React.createElement(ShopperContainer, {\n        web3: this.state.web3,\n        currentAccount: this.state.currentAccount,\n        marketplace: this.state.marketplaceInstance,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["C:\\Users\\Nikhil\\Documents\\GitHub\\ConsensysAcademy-Final-Project\\src\\App.js"],"names":["React","Component","MarketplaceContract","getWeb3","AdminComponent","StoreOwnerContainer","ShopperContainer","App","props","state","accountType","web3","marketplaceInstance","currentAccount","then","results","setState","instantiateContract","catch","console","log","contract","require","marketplace","setProvider","currentProvider","eth","getAccounts","error","accounts","deployed","instance","getUserType","call","from","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport MarketplaceContract from '../../build/contracts/Marketplace.json'\nimport getWeb3 from './utils/getWeb3'\n\nimport AdminComponent from './AdminComponent';\nimport StoreOwnerContainer from './StoreOwnerContainer';\nimport ShopperContainer from './ShopperContainer';\n\nimport './css/oswald.css'\nimport './css/open-sans.css'\nimport './css/pure-min.css'\nimport './App.css'\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      accountType: '',\n      web3: null,\n      marketplaceInstance: null,\n      currentAccount: ''\n    }\n  }\n\n  componentWillMount() {\n    // Get network provider and web3 instance.\n    // See utils/getWeb3 for more info.\n\n    getWeb3.then(results => {\n      this.setState({\n        web3: results.web3\n      })\n\n      // Instantiate contract once web3 provided.\n      this.instantiateContract()\n    })\n    .catch(() => {\n      console.log('Error finding web3.')\n    })\n  }\n\n  instantiateContract() {\n    const contract = require('truffle-contract')\n    const marketplace = contract(MarketplaceContract)\n    marketplace.setProvider(this.state.web3.currentProvider)\n\n    this.state.web3.eth.getAccounts((error, accounts) => {\n      marketplace.deployed()\n        .then((instance) => this.setState({marketplaceInstance: instance, currentAccount: accounts[0]}))\n        .then(() => this.state.marketplaceInstance.getUserType.call({from: accounts[0]}))\n        .then((accountType) => this.setState({ accountType: accountType }))\n    })\n  }\n\n  render() {\n    const accountType = this.state.accountType;\n    return (\n      <div className=\"App\">\n        <main style={{marginTop: '25px'}} className=\"container\">\n          <div className=\"pure-g\">\n            <div className=\"pure-u-1-1\">\n              {accountType === '' && <p>Loading...</p>}\n              {accountType === 'admin' && <AdminComponent \n                  web3={this.state.web3}\n                  currentAccount={this.state.currentAccount} \n                  marketplace={this.state.marketplaceInstance}></AdminComponent>}\n              {accountType === 'storeOwner' && <StoreOwnerContainer \n                  web3={this.state.web3} \n                  currentAccount={this.state.currentAccount} \n                  marketplace={this.state.marketplaceInstance}></StoreOwnerContainer>}\n              {accountType === 'shopper' && <ShopperContainer \n                  web3={this.state.web3} \n                  currentAccount={this.state.currentAccount} \n                  marketplace={this.state.marketplaceInstance}></ShopperContainer>}\n            </div>\n          </div>\n        </main>\n      </div>\n    );\n  }\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}