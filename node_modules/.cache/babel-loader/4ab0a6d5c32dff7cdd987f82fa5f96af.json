{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Nikhil\\\\Documents\\\\GitHub\\\\ConsensysAcademy-Final-Project\\\\src\\\\AdminComponent.js\";\nimport React, { Component } from 'react';\nimport Header from './Header.js';\nexport var AdminComponent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AdminComponent, _Component);\n\n  function AdminComponent(props) {\n    var _this;\n\n    _classCallCheck(this, AdminComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AdminComponent).call(this, props));\n    _this.state = {\n      loading: true,\n      openStoreRequests: []\n    };\n    _this.handleApproveStoreRequest = _this.handleApproveStoreRequest.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.updateOpenStoreOwnerRequests = _this.updateOpenStoreOwnerRequests.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(AdminComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.updateOpenStoreOwnerRequests();\n      this.props.marketplace.StoreOwnerAdded().watch(function (error, result) {\n        if (!error) {\n          _this2.updateOpenStoreOwnerRequests();\n        }\n      });\n    }\n  }, {\n    key: \"updateOpenStoreOwnerRequests\",\n    value: function updateOpenStoreOwnerRequests() {\n      var _this3 = this;\n\n      this.props.marketplace.getStoreOwnerRequests.call().then(function (requests) {\n        _this3.props.marketplace.StoreOwnerAdded({}, {\n          fromBlock: 0,\n          toBlock: 'latest'\n        }).get(function (error, events) {\n          if (!error) {\n            var ownersAdded = events.map(function (event) {\n              return event.args.storeOwnerAddress;\n            });\n\n            _this3.setState({\n              openStoreRequests: requests.filter(function (n) {\n                return !ownersAdded.includes(n);\n              }),\n              loading: false\n            });\n          }\n        });\n      });\n    }\n  }, {\n    key: \"handleApproveStoreRequest\",\n    value: function handleApproveStoreRequest(index, requestAddress) {\n      var _this4 = this;\n\n      this.setState({\n        loading: true\n      }, function () {\n        return _this4.props.marketplace.addStoreOwner.sendTransaction(index, requestAddress, {\n          from: _this4.props.currentAccount\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var requests = this.state.openStoreRequests.length ? this.state.openStoreRequests.map(function (request, index) {\n        return React.createElement(\"div\", {\n          key: request,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          style: {\n            marginRight: '10px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51\n          },\n          __self: this\n        }, \"Requesting Address: \", request), React.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this5.handleApproveStoreRequest(index, request);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, \"Approve\"));\n      }) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, \"No open requests...\");\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(Header, {\n        currentAccount: this.props.currentAccount,\n        pageTitle: \"Admin Page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          border: '1px solid #0000001e',\n          borderRadius: '4px',\n          backgroundColor: '#fafafa',\n          padding: '15px 15px 60px 15px',\n          margin: '15px',\n          position: 'relative'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          fontSize: '24px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"Open Store Owner Requests\"), this.state.loading ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \"Loading...\") : requests));\n    }\n  }]);\n\n  return AdminComponent;\n}(Component);\nexport default AdminComponent;","map":{"version":3,"sources":["C:\\Users\\Nikhil\\Documents\\GitHub\\ConsensysAcademy-Final-Project\\src\\AdminComponent.js"],"names":["React","Component","Header","AdminComponent","props","state","loading","openStoreRequests","handleApproveStoreRequest","bind","updateOpenStoreOwnerRequests","marketplace","StoreOwnerAdded","watch","error","result","getStoreOwnerRequests","call","then","requests","fromBlock","toBlock","get","events","ownersAdded","map","event","args","storeOwnerAddress","setState","filter","n","includes","index","requestAddress","addStoreOwner","sendTransaction","from","currentAccount","length","request","marginRight","border","borderRadius","backgroundColor","padding","margin","position","fontSize"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport Header from './Header.js';\r\n\r\nexport class AdminComponent extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n        this.state = {\r\n          loading: true,\r\n          openStoreRequests: []\r\n        };\r\n    \r\n        this.handleApproveStoreRequest = this.handleApproveStoreRequest.bind(this);\r\n        this.updateOpenStoreOwnerRequests = this.updateOpenStoreOwnerRequests.bind(this);\r\n      }\r\n    \r\n      componentDidMount() {\r\n        this.updateOpenStoreOwnerRequests();\r\n        \r\n        this.props.marketplace.StoreOwnerAdded().watch((error, result) => {\r\n          if (!error) {\r\n            this.updateOpenStoreOwnerRequests();\r\n          }\r\n        });\r\n      }\r\n    \r\n      updateOpenStoreOwnerRequests() {\r\n        this.props.marketplace.getStoreOwnerRequests.call().then(requests => {\r\n          this.props.marketplace.StoreOwnerAdded({}, {fromBlock: 0, toBlock: 'latest'}).get((error, events) => {\r\n            if (!error) {\r\n              const ownersAdded = events.map(event => event.args.storeOwnerAddress);\r\n              this.setState({\r\n                openStoreRequests: requests.filter(n => !ownersAdded.includes(n)),\r\n                loading: false\r\n              })\r\n            }\r\n          });\r\n        });\r\n      }\r\n    \r\n      handleApproveStoreRequest(index, requestAddress) {\r\n        this.setState(\r\n          {loading: true}, \r\n          () => this.props.marketplace.addStoreOwner.sendTransaction(index, requestAddress, {from: this.props.currentAccount}));\r\n      }\r\n    \r\n      render() {\r\n        const requests = this.state.openStoreRequests.length\r\n          ? this.state.openStoreRequests.map((request, index) => \r\n            <div key={request}>\r\n              <span style={{marginRight: '10px'}}>Requesting Address: {request}</span>\r\n              <button onClick={() => this.handleApproveStoreRequest(index, request)}>Approve</button>\r\n            </div>)\r\n          : <div>No open requests...</div>;\r\n    \r\n        return (\r\n          <div>\r\n            <Header currentAccount={this.props.currentAccount} pageTitle='Admin Page'></Header>\r\n    \r\n            <div style={{\r\n              border: '1px solid #0000001e', \r\n              borderRadius: '4px', \r\n              backgroundColor: '#fafafa',\r\n              padding: '15px 15px 60px 15px',\r\n              margin: '15px',\r\n              position: 'relative'}}>\r\n              <div style={{fontSize: '24px'}}>Open Store Owner Requests</div>\r\n              \r\n              {this.state.loading ? <div>Loading...</div> : requests}\r\n            </div>\r\n    \r\n          </div>\r\n        );\r\n      }\r\n    }\r\n    \r\n    export default AdminComponent\r\n    "]},"metadata":{},"sourceType":"module"}